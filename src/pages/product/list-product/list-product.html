<ion-header color="dark">
	<ion-navbar color="dark">
    <ion-title text-center>Lista Productos 
        <br>        
        <ion-chip outline="true" color="danger">
          <ion-spinner name="dots" *ngIf="showLoading"></ion-spinner>
          <ion-label class="price" *ngIf="!showLoading">{{totalAmountFinalList | currency: 'EUR':2 }} </ion-label>
        </ion-chip>
    </ion-title>
    <!--
		<ion-buttons left>
			<button ion-button icon-only (click)="showMenu()">
			<ion-icon name="menu"></ion-icon>
      </button>
    </ion-buttons>
    -->
    <ion-buttons end>
			<button ion-button icon-only (click)="presentActionSheet()">
        <ion-icon name="more"></ion-icon>
      </button>     
		</ion-buttons>
	</ion-navbar>
</ion-header>
<!--
<ion-menu [content]="contentproduct" side="left" id="filtersproduct">  
  <ion-header>
    <ion-toolbar color="dark">
      <ion-title>Opciones</ion-title>
      <ion-buttons end>
        <button ion-button icon-only (click)="hideMenu()">
          <ion-icon name="close"></ion-icon>
        </button>
		</ion-buttons>
    </ion-toolbar>
  </ion-header>

  <ion-content class="background-page">     
    <ion-list>
      <ion-item menuClose class="item-secundary" (click)="goToHome()">
          <ion-icon name="arrow-round-back" item-right></ion-icon>
          Pantalla Inicio
      </ion-item>
      <ion-item menuClose *ngFor="let p of pages" [navPush]="p.component" class="item-secundary">
          <ion-icon [name]="p.icon" item-right></ion-icon>
          {{ p.title }}
      </ion-item>
      <ion-item-group id="group-home">
        <ion-item-divider  class="item-secundary" *ngIf="auth.getEmail()">  {{ auth.getEmail() }} </ion-item-divider>
        <ion-item (click)="logout()" class="button-primary" *ngIf="auth.getAuthenticated">
          <ion-icon name="log-out" item-right></ion-icon>
          Salir
        </ion-item>
        <ion-item (click)="login()" class="button-primary" *ngIf="!auth.getAuthenticated">
          <ion-icon name="log-in" item-right></ion-icon>
          Log in
        </ion-item>
      </ion-item-group>
    </ion-list>
  </ion-content>
</ion-menu>
-->

<ion-content #contentproduct class="background-page">    
  <ion-card  *ngFor="let product of productList">
    <ion-grid>
      <ion-row >

        <ion-col col-7 [navPush]="allProductPage" [navParams]="{product:product, action: 'view'}" class="text-cont" style="font-size: 1.7rem">
          {{ product.name }}
        </ion-col>
        <ion-col col-3 text-right class="text-label">
          Impuesto:
        </ion-col>
        <ion-col col-2 text-right class="text-cont">
          {{ product.tax }} %
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-3 class="text-label">
          Unidades:
        </ion-col>
        <ion-col col-3 text-center class="text-cont price">          
          {{ product.units }}
        </ion-col>
        <ion-col col-3 class="text-label">
            Precio:
        </ion-col>
        <ion-col col-3 text-right class="text-cont price">            
          {{ product.price | currency: "EUR":2 }}
        </ion-col>
      </ion-row>
      <ion-row>
        <ion-col col-3 class="text-label">
          Subtotal:
        </ion-col>
        <ion-col col-3 text-right class="text-subtotal price">         
          {{ product.priceFinal | currency: "EUR":2 }} 
        </ion-col>
        <ion-col col-3 class="text-total">
            Total:
          </ion-col>
          <ion-col col-3 text-right class="text-total price">       
            {{ product.amountFinal | currency: "EUR":2}} 
        </ion-col>
      </ion-row>
      <ion-row class="padd-0 ion-row">
        <ion-col col-6 class="padd-0">
          <button ion-button icon-left clear block class="marg-0 button-item" color="danger" (click)="removeProduct(product)">
            <ion-icon name="trash"></ion-icon>
            Borrar
          </button> 
        </ion-col>
        <ion-col col-6 class="padd-0">
          <button ion-button icon-left clear block class="marg-0 button-item" color="secondary" [navPush]="allProductPage" [navParams]="{product:product, action: 'edit'}">            
            <ion-icon name="create"></ion-icon>
              Editar
          </button>   
        </ion-col>        
      </ion-row>
    </ion-grid>

    <!--
    <ion-list>   
      <ion-item-sliding>
        <ion-item> 
          <ion-label [navPush]="editProductPage" [navParams]="{product:product, isEdit: false}">
              {{ product.name }}
          </ion-label>          
          <button ion-button clear icon-start item-end color="secondary" [navPush]="editProductPage" [navParams]="{product:product, isEdit: true}">            
            <ion-icon name="create"></ion-icon>
              Editar
          </button>          
        </ion-item>  
        <ion-item>
            <ion-label>
              Unidades: 
              {{ product.units }}
            </ion-label>
        </ion-item>

        <ion-item-options side="right">
          <button ion-button outline color="danger" (click)="removeProduct(product)">
            <ion-icon name="trash"></ion-icon>
            Borrar
          </button>                     
        </ion-item-options>            
      </ion-item-sliding>
    </ion-list>    
    --> 
  </ion-card> 

  <ion-fab end bottom>
    <button ion-fab color="dark" class="bck-pri-four" [navPush]="allProductPage" [navParams]="{action: 'add'}">
        <ion-icon name="add"></ion-icon>
    </button>
  </ion-fab>

  <div class="wrapper-loading" *ngIf="showLoading">
    <div class="loading">
      <span>Cargando ....</span>
    </div> 
  </div>
 
</ion-content>
